on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

name: build
jobs:

  build:
    runs-on: ubuntu-20.04
    strategy:
      matrix:
        board:
          - uno
          - esp32dev
          - esp01
          - yun
          - digix
          - teensy30
        example:
          - Blink
          - ColorPalette
          - ColorTemperature
          - Cylon
          - DemoReel100
          - Fire2012
          - FirstLight
          - Multiple/MultipleStripsInOneArray
          - Multiple/ArrayOfLedArrays
          - Noise
          - NoisePlayground
          - NoisePlusPalette
          - Pacifica
          - Pride2015
          - RGBCalibrate
          - RGBSetDemo
          - TestTemplatedMethods
          - TwinkleFox
          - XYMatrix
    steps:
      - name: checkout code
        uses: actions/checkout@v2

      - name: install python
        uses: actions/setup-python@v2
        with:
          python-version: '3.8'

      - name: install platformio
        run: |
          pip install platformio==5.0.3

      - name: build example
        run: pio ci --board ${{ matrix.board }} --lib=src "examples/${{ matrix.example }}/*.ino"
